<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Yumekawa Focus Timer</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family:"Hiragino Maru Gothic ProN",sans-serif;
  background: linear-gradient(135deg,#ffd6ec,#d6f0ff,#efe1ff);
  background-size:200% 200%;
  animation:bgMove 10s ease infinite;
  text-align:center;
  padding:40px;
}

@keyframes bgMove{
  0%{background-position:0% 50%;}
  50%{background-position:100% 50%;}
  100%{background-position:0% 50%;}
}

.container{
  max-width:420px;
  margin:auto;
  background:rgba(255,255,255,0.9);
  backdrop-filter:blur(10px);
  padding:30px;
  border-radius:25px;
  box-shadow:0 10px 30px rgba(255,150,200,0.25);
}

h1{ color:#ff7eb6; }

#timer{
  font-size:60px;
  margin:20px 0;
  font-weight:bold;
  color:#ff7eb6;
  text-shadow:0 0 15px rgba(255,150,220,0.5);
}

button{
  padding:12px 22px;
  margin:6px;
  border:none;
  border-radius:20px;
  font-size:16px;
  cursor:pointer;
  transition:0.25s;
}

button:hover{
  transform:translateY(-3px) scale(1.05);
}

.bgm{ background:#ffe6f2; }
.start{ background:#e6f0ff; }
.stop{ background:#ffe6e6; }

.sparkle{
  position:fixed;
  font-size:20px;
  animation:spark 1s linear forwards;
}

@keyframes spark{
  from{ transform:translateY(0) scale(1); opacity:1;}
  to{ transform:translateY(-80px) scale(0.5); opacity:0;}
}
</style>
</head>

<body>

<div class="container">

<h1>üéß Focus Timer</h1>

<div id="timer">25:00</div>

<h3>BGM</h3>

<button class="bgm" onclick="selectBGM('h6VdSjyUbbo')">10‚ÑÉ</button>
<button class="bgm" onclick="selectBGM('MXyspoCaQls')">„Åä„Å≤„Çã„Åô„Åé</button>
<button class="bgm" onclick="selectBGM('2EUvlHJ5UAc')">Êòü„ÅÆÈôç„ÇãÂ§ú</button>
<button class="bgm" onclick="selectBGM('Yb-rLsCpBvI')">2:23AM</button>

<br>

<button class="start" onclick="startTimer()">‚ñ∂ „Çø„Ç§„Éû„Éº„Çπ„Çø„Éº„Éà</button>
<button class="stop" onclick="stopAll()">‚ñ† ÂÅúÊ≠¢</button>

<br><br>

<iframe
 id="player"
 width="300"
 height="170"
 frameborder="0"
 allow="autoplay; encrypted-media"
 allowfullscreen>
</iframe>

</div>

<script>

/* ===== „Çø„Ç§„Éû„Éº ===== */
let time = 25 * 60;
let timer = null;

/* ===== BGM ===== */
let selectedBGM = "h6VdSjyUbbo";

/* ===== Ë°®Á§∫Êõ¥Êñ∞ ===== */
function updateTimer(){
 const min=Math.floor(time/60);
 const sec=time%60;

 document.getElementById("timer").textContent =
 String(min).padStart(2,"0")+":"+
 String(sec).padStart(2,"0");
}

/* ===== BGMÈÅ∏Êäû ‚Üí Âç≥ÂÜçÁîü ===== */
function selectBGM(id){

 selectedBGM=id;
 createSparkles();

 const player=document.getElementById("player");

 player.src=
 "https://www.youtube.com/embed/"+id+
 "?autoplay=1&mute=1&loop=1&playlist="+id+
 "&enablejsapi=1";

 setTimeout(()=>{
  player.contentWindow.postMessage(
  '{"event":"command","func":"unMute","args":""}',
  '*'
  );
 },2000);
}

/* ===== „Çø„Ç§„Éû„Éº„Çπ„Çø„Éº„Éà ===== */
function startTimer(){

 if(timer) return;

 time=25*60;
 updateTimer();
 createSparkles();

 timer=setInterval(()=>{
  time--;
  updateTimer();

  if(time<=0){
   clearInterval(timer);
   timer=null;
   alert("„Åä„Å§„Åã„Çå„Åï„Åæüåô");
  }

 },1000);
}

/* ===== ÂÖ®ÂÅúÊ≠¢ ===== */
function stopAll(){
 clearInterval(timer);
 timer=null;
 document.getElementById("player").src="";
}

/* ===== „Ç≠„É©„Ç≠„É© ===== */
function createSparkles(){
 const icons=["‚ú®","üí´","‚≠ê","üåô"];

 for(let i=0;i<8;i++){
  const s=document.createElement("div");
  s.className="sparkle";
  s.textContent=icons[Math.floor(Math.random()*icons.length)];
  s.style.left=Math.random()*100+"vw";
  s.style.top="60vh";
  document.body.appendChild(s);
  setTimeout(()=>s.remove(),1000);
 }
}

updateTimer();

</script>

</body>
</html>
